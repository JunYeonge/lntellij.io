<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/loginFormLayout}">


<section layout:fragment="content">

    <h1>로그인</h1>

    <form action="/members/login" role="form" method="post">

        <div id="index_login">
            <h2>Index-WebToon <br> 계정으로 로그인</h2>
            <div class="login_input">
                <label th:for="email"></label>
                <input type="email" name="email" id="email" placeholder="이메일">
            </div>
            <div class="login_input">
                <label th:for="password"></label>
                <input type="password" name="password" placeholder="비밀번호">
            </div>
            <div id="searchInfo">
                <div>
                    <input class="form-check-input" type="checkbox" id="rememberEmail" name="rememberEmail" value="true">
                    <label class="form-check-label" for="rememberEmail">아이디 저장</label>
                </div>
                <div>
                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                    <label class="form-check-label" th:for="inlineCheckbox2">자동 로그인</label>
                </div>
            </div>
            <p th:if="${loginErrorMsg}" class="error" th:text="${loginErrorMsg}"></p>
            <div>
            </div>
            <div id="btn_wrap">
                <button>로그인</button>
                <button type="button" onclick="location.href='/members/new'">회원가입
                </button>
            </div>
            <div>
                <a href="#">아이디 · 비밀번호 찾기</a>
            </div>
        </div>

        <div id="kakao_login">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <h2 tabindex="0" class="login-box-hd text-center"> SNS 계정으로 로그인</h2>
            <div role="group" aria-label="Third group">
                <a href="/oauth2/authorization/kakao">
                    <img src="/images/kakao_logo.png" alt="카카오 로그인">
                </a>
            </div>
        </div>
        <script th:if="${showSuccessAlert}" th:inline="javascript">
            alert("회원가입이 완료되었습니다.");
        </script>
    </form>


    <script th:inline="javascript">

        document.addEventListener("DOMContentLoaded", function () {

            let successMessage = /*[[${successMessage}]]*/ null;

            if (successMessage !== null && successMessage !== "") {
                alert(successMessage);
            }
            let errorMessage = /*[[${errorMessage}]]*/ null;

            if (errorMessage !== null && errorMessage !== "") {
                alert(errorMessage);
            }

        });
    </script>

</section>
</html>